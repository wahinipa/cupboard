{% extends "content.j2" %}
{% from 'card_macros.j2' import viewing_card %}
{% from 'tree_macros.j2' import tree_root %}
{% from 'action_macros.j2' import action_card %}
{% from 'category_macros.j2' import category_macro %}
{% block innards %}
  {% call viewing_card(label=label, purpose='target') %}
    {% if lines %}
      {% for line in lines %}
        <h5>{{ line }}</h5>
      {% endfor %}
    {% endif %}
    <div id="tree">
    </div>
  {% endcall %}
  {% if categories %}
    {% for category in categories %}
      {% call viewing_card(prefix="Category: ", label=category.name, view_url=category.url) %}
        {{ category_macro(**category) }}
      {% endcall %}
    {% endfor %}
  {% endif %}
  {{ action_card(label, actions) }}
{% endblock %}
{% block extra_js %}
  {{ tree_root(nodes) }}
{% endblock %}
